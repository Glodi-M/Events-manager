{% extends 'base.html.twig' %}

{% block title %}
	Log in!
{% endblock %}

{% block body %}
	<div
		class="bg-cover bg-center bg-fixed"
		style="background-image: url('{{ asset('images/HAl3DL.webp') }}');">
		<div
			class="flex justify-center items-center min-h-screen bg-gray-900 bg-opacity-50 p-5">
			<div
				class="w-full max-w-md bg-white p-8 rounded-lg shadow-lg">

				<!-- Affichage des erreurs -->
				{% if error %}
					<div
						class="mb-4 text-red-500 bg-red-100 p-3 rounded-md">
						{{ error.messageKey|trans(error.messageData, 'security') }}
					</div>
				{% endif %}

				<!-- Si l'utilisateur est déjà connecté -->
				{% if app.user %}
					<div
						class="mb-3 text-green-500">
						Vous êtes connecté en tant que
						<strong>
							{{ app.user.userIdentifier }}
						</strong>
						,
						<a
							href="{{ path('app_logout') }}" class="text-blue-600 hover:underline">
							Déconnexion
						</a>
					</div>
				{% endif %}

				<!-- Titre -->
				<h1
					class="text-3xl font-bold text-center mb-6 text-gray-800">
					Veuillez vous connecter
				</h1>

				<!-- Formulaire de connexion -->
				<form
					method="post">

					<!-- Email -->
					<div
						class="mb-4">
						<label
							for="username"
							class="block text-sm font-medium text-gray-700">
							Email
						</label>
						<input
							type="email"
							value="{{ last_username }}" name="_username"
							id="username"
							class="w-full border border-gray-300 p-3 rounded-md text-sm outline-none focus:ring-2 focus:ring-blue-500"
							autocomplete="email"
							required
							autofocus>
					</div>

					<!-- Mot de passe -->
					<div
						class="mb-4">
						<label
							for="password"
							class="block text-sm font-medium text-gray-700">
							Mot de passe
						</label>
						<input
							type="password"
							name="_password"
							id="password"
							class="w-full border border-gray-300 p-3 rounded-md text-sm outline-none focus:ring-2 focus:ring-blue-500"
							autocomplete="current-password"
							required>
					</div>

					<!-- CSRF Token -->
					<input
					type="hidden"
						name="_csrf_token"
						value="{{ csrf_token('authenticate') }}">

					<!-- Bouton de connexion -->
					<button
						type="submit"
						class="w-full bg-green-600 text-white p-3 rounded-md hover:bg-green-700 transition duration-200">
						Se connecter
					</button>
				</form>

				<!-- Option de création de compte ou de récupération de mot de passe -->
				<div
					class="mt-4 text-center">
					<a
						href="{{ path('app_register') }}" class="text-sm text-blue-600 hover:underline">
						Créer un compte
					</a>
					<br>
					<a
						href=""
						class="text-sm text-blue-600 hover:underline">
						Mot de passe oublié ?
					</a>
				</div>
			</div>
		</div>
	</div>

{% endblock %}
